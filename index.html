<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OceanOS v29 - Chess Toxicity Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;800&family=Rajdhani:wght@600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        :root {
            --primary: #3b82f6; --bg: #020617; --surface: #0f172a;
            --text-main: #f8fafc; --text-sub: #94a3b8; --border: #1e293b;
            --tile-light: #dee3e6; --tile-dark: #8ca2ad; --tile-sel: #f59e0b99;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Outfit', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text-main); overflow: hidden; height: 100vh; }

        /* INTRO SPLASH */
        #splash { position: fixed; inset: 0; background: var(--bg); z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .bar { width: 180px; height: 4px; background: #1e293b; border-radius: 10px; overflow: hidden; margin-top: 20px; }
        .progress { width: 100%; height: 100%; background: var(--primary); animation: load 2s ease-in-out; transform-origin: left; }
        @keyframes load { from { transform: scaleX(0); } to { transform: scaleX(1); } }

        /* UI APP */
        .page { display: none; height: 100vh; overflow-y: auto; padding: 20px 20px 120px; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card { background: var(--surface); border: 1px solid var(--border); border-radius: 22px; padding: 20px; margin-bottom: 20px; }
        .btn { background: var(--primary); color: white; border: none; padding: 14px; border-radius: 14px; font-weight: 800; width: 100%; cursor: pointer; font-family: 'Rajdhani'; text-transform: uppercase; }
        input { width: 100%; padding: 15px; background: #1e293b; border: 1px solid var(--border); border-radius: 12px; color: white; margin-bottom: 12px; outline: none; }

        /* MODAL ADDONS */
        #addon-modal { position: fixed; inset: 0; background: var(--bg); z-index: 6000; display: none; flex-direction: column; padding: 20px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .det-img-box { width: 100%; height: 200px; border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 80px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }

        /* GAME VIEW & CHESS */
        #game-view { position: fixed; inset: 0; background: var(--bg); z-index: 5000; display: none; flex-direction: column; }
        
        /* BONG B√ìNG KH·ªäA */
        .ai-bubble {
            position: absolute; top: -65px; left: 50%; transform: translateX(-50%);
            background: white; color: #0f172a; padding: 10px 15px; border-radius: 15px;
            font-weight: 800; font-size: 13px; width: 220px; text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4); opacity: 0; transition: 0.3s;
            pointer-events: none; z-index: 200;
        }
        .ai-bubble::after {
            content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%);
            border-width: 8px 8px 0; border-style: solid; border-color: white transparent transparent transparent;
        }
        .ai-bubble.show { opacity: 1; top: -80px; }

        /* THANH ƒê√ÅNH GI√Å TH·∫æ TR·∫¨N */
        .eval-container { width: 95%; max-width: 400px; margin: 10px auto; height: 12px; background: #333; border-radius: 6px; overflow: hidden; border: 1px solid #555; }
        .eval-bar { height: 100%; width: 50%; background: #fff; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }

        /* B√ÄN C·ªú */
        #board-box { display: grid; grid-template-columns: repeat(8, 1fr); width: 95%; max-width: 400px; margin: 0 auto; aspect-ratio: 1/1; border: 6px solid #1e293b; border-radius: 10px; overflow: hidden; position: relative; }
        .board-lock { position: absolute; inset: 0; z-index: 100; display: none; }
        .tile { display: flex; align-items: center; justify-content: center; position: relative; }
        .tile.l { background: var(--tile-light); } .tile.d { background: var(--tile-dark); }
        .piece { width: 90%; height: 90%; background-size: contain; background-repeat: no-repeat; background-position: center; z-index: 5; transition: 0.2s; }
        .sel { background: var(--tile-sel) !important; }
        .hint::after { content: ""; width: 25%; height: 25%; background: rgba(0,0,0,0.1); border-radius: 50%; }

        /* NAVIGATION */
        nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 450px; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(15px); border-radius: 24px; padding: 12px; display: flex; justify-content: space-around; border: 1px solid var(--border); z-index: 1000; }
        .nav-i { font-size: 26px; color: #475569; cursor: pointer; }
        .nav-i.active { color: var(--primary); transform: translateY(-3px); transition: 0.3s; }

        .item-row { display: flex; align-items: center; gap: 15px; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 15px; border: 1px solid var(--border); cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>

<div id="splash">
    <h1 style="font-family:'Rajdhani'; letter-spacing:6px;">OCEAN<span style="color:var(--primary)">OS</span></h1>
    <div class="bar"><div class="progress"></div></div>
</div>

<div id="addon-modal">
    <div class="modal-header">
        <h2 style="font-family:'Rajdhani';">TH√îNG TIN <span style="color:var(--primary)">ADDON</span></h2>
        <i class='bx bx-x' style="font-size:35px" onclick="AddonStore.close()"></i>
    </div>
    <div id="det-img-box" class="det-img-box">üì¶</div>
    <h2 id="det-name" style="margin-bottom:10px; color:var(--primary)">T√™n Addon</h2>
    <div style="flex:1; overflow-y:auto;">
        <p id="det-desc" style="color:var(--text-sub); line-height:1.6; font-size:14px;">M√¥ t·∫£ chi ti·∫øt...</p>
    </div>
    <button id="det-download" class="btn" style="margin-top:20px;">T·∫¢I XU·ªêNG (.MCPACK)</button>
</div>

<div id="game-view">
    <div style="padding:15px 20px; display:flex; justify-content:space-between; align-items:center;">
        <h3 style="font-family:'Rajdhani'">CHESS ARENA v3.0</h3>
        <i class='bx bx-x' style="font-size:35px" onclick="Game.close()"></i>
    </div>
    
    <div style="padding:0 15px; text-align:center;">
        <div class="eval-container">
            <div id="eval-fill" class="eval-bar"></div>
        </div>

        <div style="position:relative; margin: 70px auto 0; max-width: 400px;">
            <div id="ai-bubble" class="ai-bubble">ƒê·ª£i t√≠, ƒëang kh·ªüi ƒë·ªông n√£o...</div>
            <div id="board-box"><div id="lock-layer" class="board-lock"></div></div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top:20px; max-width: 400px; margin-left:auto; margin-right:auto;">
            <button class="btn" style="background:#475569" onclick="Chess.undo()">L√ôI B∆Ø·ªöC</button>
            <button class="btn" onclick="Chess.reset()">V√ÅN M·ªöI</button>
        </div>
        <p id="game-status" style="margin-top:20px; font-weight:800; font-family:'Rajdhani'; color:var(--primary); font-size:18px;">L∆Ø·ª¢T C·ª¶A B·∫†N</p>
    </div>
</div>

<div class="container">
    <div id="home" class="page active">
        <header style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <div style="font-family:'Rajdhani'; font-size:26px; font-weight:800;">OCEAN<span>OS</span></div>
            <div id="u-icon" style="width:40px;height:40px;background:var(--primary);border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:800">?</div>
        </header>
        <div class="card" style="background: linear-gradient(135deg, #2563eb, #020617); border:none;">
            <h2 id="hi-user">Ch√†o n√≠!</h2>
            <p style="font-size:13px; opacity:0.8; margin-top:5px;">H·ªá th·ªëng OceanOS v29 ƒë√£ s·∫µn s√†ng.</p>
        </div>
        <div class="item-row" onclick="Game.open()">
            <div class="item-img" style="background:var(--primary); width:50px; height:50px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:24px;">‚ôüÔ∏è</div>
            <div style="flex:1"><b>Chess God Mode</b><p style="font-size:11px; color:var(--text-sub)">AI Minimax (Bi·∫øt kh·ªãa ng∆∞·ªùi ch∆°i)</p></div>
        </div>
    </div>

    <div id="addons" class="page">
        <h2 style="font-family:'Rajdhani'; margin-bottom:20px;">KHO ADDONS</h2>
        <div id="addon-list-container"></div>
    </div>

    <div id="profile" class="page">
        <div id="auth-ui">
            <div class="card">
                <h3>ƒêƒÇNG K√ù</h3>
                <input id="u-user" placeholder="T√™n ng∆∞·ªùi d√πng...">
                <input id="u-pass" type="password" placeholder="M·∫≠t kh·∫©u...">
                <button class="btn" onclick="Auth.process()">X√ÅC NH·∫¨N</button>
                <p onclick="Auth.switch()" style="text-align:center; margin-top:20px; font-size:13px; color:var(--text-sub); cursor:pointer">ƒê√£ c√≥ t√†i kho·∫£n? <b>ƒêƒÉng nh·∫≠p</b></p>
            </div>
        </div>
        <div id="user-ui" style="display:none" class="card">
            <div style="text-align:center">
                <div id="av-big" style="width:80px;height:80px;background:var(--primary);border-radius:20px;margin:0 auto 15px;display:flex;align-items:center;justify-content:center;font-size:35px;font-weight:800">?</div>
                <h2 id="nm-big">User</h2>
                <button class="btn" style="background:#ef4444; margin-top:25px;" onclick="Auth.logout()">ƒêƒÇNG XU·∫§T</button>
            </div>
        </div>
    </div>
</div>

<nav>
    <i class='bx bxs-home-alt-2 nav-i active' onclick="Tab('home', this)"></i>
    <i class='bx bxs-component nav-i' onclick="Tab('addons', this)"></i>
    <i class='bx bxs-user-circle nav-i' onclick="Tab('profile', this)"></i>
</nav>

<script src="addons.js"></script>
<script src="chess_core.js"></script>

<script>
const Auth = {
    data: JSON.parse(localStorage.getItem('ocean_user')),
    isReg: true,
    switch() { this.isReg = !this.isReg; document.querySelector('#auth-ui h3').innerText = this.isReg ? "ƒêƒÇNG K√ù" : "ƒêƒÇNG NH·∫¨P"; },
    process() {
        const u = document.getElementById('u-user').value, p = document.getElementById('u-pass').value;
        if(u && p) { localStorage.setItem('ocean_user', JSON.stringify({u,p})); location.reload(); }
    },
    logout() { localStorage.removeItem('ocean_user'); location.reload(); },
    init() {
        setTimeout(() => document.getElementById('splash').style.display='none', 2000);
        if(this.data) {
            document.getElementById('auth-ui').style.display='none';
            document.getElementById('user-ui').style.display='block';
            document.getElementById('hi-user').innerText = "Ch√†o, " + this.data.u;
            document.getElementById('nm-big').innerText = this.data.u;
            document.getElementById('u-icon').innerText = this.data.u[0].toUpperCase();
            document.getElementById('av-big').innerText = this.data.u[0].toUpperCase();
        }
    }
};

function Tab(id, el) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelectorAll('.nav-i').forEach(i => i.classList.remove('active'));
    el.classList.add('active');
}

const Game = { 
    open() { document.getElementById('game-view').style.display='flex'; Chess.reset(); }, 
    close() { document.getElementById('game-view').style.display='none'; } 
};

Auth.init();
</script>
</body>
</html>
